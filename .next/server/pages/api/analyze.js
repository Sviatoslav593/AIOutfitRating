"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze";
exports.ids = ["pages/api/analyze"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/analyze.js */ \"(api)/./pages/api/analyze.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analyze\",\n        pathname: \"/api/analyze\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFuYWx5emUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFuYWx5emUuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUQ7QUFDbkQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1vdXRmaXQtcmF0ZXIvPzhhNDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9hbmFseXplLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5emVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/analyze.js":
/*!******************************!*\
  !*** ./pages/api/analyze.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__]);\nformidable__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Disable default body parser to handle file uploads\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const form = new formidable__WEBPACK_IMPORTED_MODULE_0__.IncomingForm();\n        const [fields, files] = await form.parse(req);\n        const file = files.image?.[0];\n        if (!file) {\n            return res.status(400).json({\n                error: \"No image file provided\"\n            });\n        }\n        if (!file.mimetype?.startsWith(\"image/\")) {\n            return res.status(400).json({\n                error: \"File must be an image\"\n            });\n        }\n        const imageBuffer = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(file.filepath);\n        const base64Image = imageBuffer.toString(\"base64\");\n        let analysis;\n        try {\n            analysis = await analyzeOutfitWithOpenAI(base64Image, file.mimetype);\n        } catch (apiError) {\n            console.error(\"OpenAI API Error:\", apiError.message);\n            // Fallback to demo analysis if OpenAI quota exceeded\n            analysis = generateDemoAnalysis();\n        }\n        fs__WEBPACK_IMPORTED_MODULE_1___default().unlinkSync(file.filepath);\n        return res.status(200).json(analysis);\n    } catch (error) {\n        console.error(\"Analysis error:\", error);\n        return res.status(500).json({\n            error: \"Failed to analyze outfit. Please try again.\",\n            details: error.message\n        });\n    }\n}\n/**\n * Analyze outfit using OpenAI Vision API\n */ async function analyzeOutfitWithOpenAI(base64Image, mimeType) {\n    const apiKey = process.env.OPENAI_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"OpenAI API key not configured\");\n    }\n    const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${apiKey}`,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            model: \"gpt-4o-mini\",\n            response_format: {\n                type: \"json_object\"\n            },\n            temperature: 0.7,\n            max_tokens: 300,\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"Ти — стиліст. Аналізуй лише те, що бачиш на фото. Уникай загальних фраз типу 'Чудовий образ'. Пиши українською, коротко, конкретно, з посиланням на деталі: кольори, фактури, фасони, посадка, поєднання, взуття, аксесуари. Якщо на зображенні немає людського аутфіту (логотип/іконка/скріншот/кімната/пейзаж/товар без людини) — поверни JSON зі style='not-an-outfit', rating=0 і пояснювальним description.\"\n                },\n                {\n                    role: \"user\",\n                    content: [\n                        {\n                            type: \"text\",\n                            text: 'Проаналізуй фото аутфіту й поверни СТРОГИЙ JSON: {\"rating\": число 1-10, \"style\": коротка категорія, \"description\": 1–2 насичені, унікальні речення українською з конкретикою. Без додаткового тексту поза JSON.}'\n                        },\n                        {\n                            type: \"image_url\",\n                            image_url: {\n                                url: `data:${mimeType};base64,${base64Image}`,\n                                detail: \"high\"\n                            }\n                        }\n                    ]\n                }\n            ]\n        })\n    });\n    if (!response.ok) {\n        const errorData = await response.json().catch(()=>({}));\n        throw new Error(`OpenAI API error: ${errorData.error?.message || response.statusText}`);\n    }\n    const data = await response.json();\n    let content = data.choices?.[0]?.message?.content?.trim();\n    if (!content) {\n        throw new Error(\"No response from OpenAI\");\n    }\n    // Якщо відповідь загорнута у ```json ... ```\n    const fenced = content.match(/```(?:json)?\\s*([\\s\\S]*?)\\s*```/i);\n    const jsonText = fenced ? fenced[1].trim() : content;\n    let analysis;\n    try {\n        analysis = JSON.parse(jsonText);\n    } catch  {\n        // Дбайливий фолбек: витягуємо оцінку/стиль з тексту й беремо перші 220 символів як опис\n        return {\n            rating: extractRatingFromText(content),\n            style: extractStyleFromText(content),\n            description: content.substring(0, 220).trim()\n        };\n    }\n    // Валідація структури та значень\n    const rating = Number.parseInt(analysis.rating, 10);\n    const style = String(analysis.style || \"\").trim();\n    const description = String(analysis.description || \"\").trim();\n    if (!Number.isFinite(rating)) {\n        analysis.rating = extractRatingFromText(content);\n    } else {\n        analysis.rating = Math.max(1, Math.min(10, rating));\n    }\n    analysis.style = style || extractStyleFromText(content);\n    analysis.description = description || content.substring(0, 220).trim() || \"Опис недоступний.\";\n    // Позначення не-аутфітів\n    if (analysis.style === \"not-an-outfit\") {\n        analysis.rating = 0;\n    }\n    return {\n        rating: analysis.rating,\n        style: analysis.style,\n        description: analysis.description\n    };\n}\n/** Fallbacks */ function extractRatingFromText(text) {\n    const ratingMatch = text.match(/rating[:\\s]*(\\d+)/i);\n    if (ratingMatch) {\n        return Math.max(1, Math.min(10, parseInt(ratingMatch[1])));\n    }\n    return Math.floor(Math.random() * 3) + 7;\n}\nfunction extractStyleFromText(text) {\n    const styles = [\n        \"casual\",\n        \"elegant\",\n        \"sporty\",\n        \"streetwear\",\n        \"business\",\n        \"bohemian\",\n        \"trendy\",\n        \"classic\",\n        \"not-an-outfit\"\n    ];\n    const lowerText = text.toLowerCase();\n    for (const style of styles){\n        if (lowerText.includes(style)) return style;\n    }\n    return \"stylish\";\n}\n/**\n * Generate demo analysis when OpenAI API is not available\n */ function generateDemoAnalysis() {\n    const styles = [\n        \"casual\",\n        \"elegant\",\n        \"sporty\",\n        \"streetwear\",\n        \"business\",\n        \"trendy\"\n    ];\n    const randomStyle = styles[Math.floor(Math.random() * styles.length)];\n    const rating = Math.floor(Math.random() * 4) + 7; // 7-10\n    const descriptions = [\n        \"Стильний образ з гарним поєднанням кольорів! Силует підкреслює фігуру, а аксесуари додають завершеності. Сучасний та актуальний вибір! ✨\",\n        \"Чудова координація елементів! Кольорова палітра гармонійна, фасон підходить ідеально. Образ виглядає впевнено та стильно! \\uD83D\\uDCAB\",\n        \"Відмінний вибір тканин та текстур! Пропорції збалансовані, деталі доповнюють один одного. Дуже модний та привабливий лук! \\uD83D\\uDD25\",\n        \"Елегантне поєднання класики та трендів! Колір підкреслює індивідуальність, крій сидить ідеально. Стиль на найвищому рівні! ⭐\",\n        \"Яскравий та запам'ятовуючийся образ! Аксесуари гармонійно доповнюють основні елементи. Сучасно, стильно та з характером! \\uD83C\\uDF1F\"\n    ];\n    return {\n        rating: rating,\n        style: randomStyle,\n        description: descriptions[Math.floor(Math.random() * descriptions.length)]\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO0lBRXpELE1BQU1PLGVBQWU7UUFDbkI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsT0FBTztRQUNMdEIsUUFBUUE7UUFDUkUsT0FBT2tCO1FBQ1BoQixhQUFha0IsWUFBWSxDQUFDWixLQUFLSSxLQUFLLENBQUNKLEtBQUtLLE1BQU0sS0FBS08sYUFBYUQsTUFBTSxFQUFFO0lBQzVFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1vdXRmaXQtcmF0ZXIvLi9wYWdlcy9hcGkvYW5hbHl6ZS5qcz9kMmJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluY29taW5nRm9ybSB9IGZyb20gXCJmb3JtaWRhYmxlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5cbi8vIERpc2FibGUgZGVmYXVsdCBib2R5IHBhcnNlciB0byBoYW5kbGUgZmlsZSB1cGxvYWRzXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBhcGk6IHtcbiAgICBib2R5UGFyc2VyOiBmYWxzZSxcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGZvcm0gPSBuZXcgSW5jb21pbmdGb3JtKCk7XG4gICAgY29uc3QgW2ZpZWxkcywgZmlsZXNdID0gYXdhaXQgZm9ybS5wYXJzZShyZXEpO1xuXG4gICAgY29uc3QgZmlsZSA9IGZpbGVzLmltYWdlPy5bMF07XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJObyBpbWFnZSBmaWxlIHByb3ZpZGVkXCIgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFmaWxlLm1pbWV0eXBlPy5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJGaWxlIG11c3QgYmUgYW4gaW1hZ2VcIiB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBpbWFnZUJ1ZmZlciA9IGZzLnJlYWRGaWxlU3luYyhmaWxlLmZpbGVwYXRoKTtcbiAgICBjb25zdCBiYXNlNjRJbWFnZSA9IGltYWdlQnVmZmVyLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuXG4gICAgbGV0IGFuYWx5c2lzO1xuICAgIHRyeSB7XG4gICAgICBhbmFseXNpcyA9IGF3YWl0IGFuYWx5emVPdXRmaXRXaXRoT3BlbkFJKGJhc2U2NEltYWdlLCBmaWxlLm1pbWV0eXBlKTtcbiAgICB9IGNhdGNoIChhcGlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIk9wZW5BSSBBUEkgRXJyb3I6XCIsIGFwaUVycm9yLm1lc3NhZ2UpO1xuXG4gICAgICAvLyBGYWxsYmFjayB0byBkZW1vIGFuYWx5c2lzIGlmIE9wZW5BSSBxdW90YSBleGNlZWRlZFxuICAgICAgYW5hbHlzaXMgPSBnZW5lcmF0ZURlbW9BbmFseXNpcygpO1xuICAgIH1cblxuICAgIGZzLnVubGlua1N5bmMoZmlsZS5maWxlcGF0aCk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYW5hbHlzaXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJBbmFseXNpcyBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogXCJGYWlsZWQgdG8gYW5hbHl6ZSBvdXRmaXQuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlLFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQW5hbHl6ZSBvdXRmaXQgdXNpbmcgT3BlbkFJIFZpc2lvbiBBUElcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZU91dGZpdFdpdGhPcGVuQUkoYmFzZTY0SW1hZ2UsIG1pbWVUeXBlKSB7XG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZO1xuICBpZiAoIWFwaUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk9wZW5BSSBBUEkga2V5IG5vdCBjb25maWd1cmVkXCIpO1xuICB9XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9uc1wiLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIG1vZGVsOiBcImdwdC00by1taW5pXCIsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0sXG4gICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgICAgbWF4X3Rva2VuczogMzAwLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gICAgICAgICAgY29udGVudDpcbiAgICAgICAgICAgIFwi0KLQuCDigJQg0YHRgtC40LvRltGB0YIuINCQ0L3QsNC70ZbQt9GD0Lkg0LvQuNGI0LUg0YLQtSwg0YnQviDQsdCw0YfQuNGIINC90LAg0YTQvtGC0L4uINCj0L3QuNC60LDQuSDQt9Cw0LPQsNC70YzQvdC40YUg0YTRgNCw0Lcg0YLQuNC/0YMgJ9Cn0YPQtNC+0LLQuNC5INC+0LHRgNCw0LcnLiDQn9C40YjQuCDRg9C60YDQsNGX0L3RgdGM0LrQvtGOLCDQutC+0YDQvtGC0LrQviwg0LrQvtC90LrRgNC10YLQvdC+LCDQtyDQv9C+0YHQuNC70LDQvdC90Y/QvCDQvdCwINC00LXRgtCw0LvRljog0LrQvtC70YzQvtGA0LgsINGE0LDQutGC0YPRgNC4LCDRhNCw0YHQvtC90LgsINC/0L7RgdCw0LTQutCwLCDQv9C+0ZTQtNC90LDQvdC90Y8sINCy0LfRg9GC0YLRjywg0LDQutGB0LXRgdGD0LDRgNC4LiDQr9C60YnQviDQvdCwINC30L7QsdGA0LDQttC10L3QvdGWINC90LXQvNCw0ZQg0LvRjtC00YHRjNC60L7Qs9C+INCw0YPRgtGE0ZbRgtGDICjQu9C+0LPQvtGC0LjQvy/RltC60L7QvdC60LAv0YHQutGA0ZbQvdGI0L7Rgi/QutGW0LzQvdCw0YLQsC/Qv9C10LnQt9Cw0LYv0YLQvtCy0LDRgCDQsdC10Lcg0LvRjtC00LjQvdC4KSDigJQg0L/QvtCy0LXRgNC90LggSlNPTiDQt9GWIHN0eWxlPSdub3QtYW4tb3V0Zml0JywgcmF0aW5nPTAg0ZYg0L/QvtGP0YHQvdGO0LLQsNC70YzQvdC40LwgZGVzY3JpcHRpb24uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICB0ZXh0OiAn0J/RgNC+0LDQvdCw0LvRltC30YPQuSDRhNC+0YLQviDQsNGD0YLRhNGW0YLRgyDQuSDQv9C+0LLQtdGA0L3QuCDQodCi0KDQntCT0JjQmSBKU09OOiB7XCJyYXRpbmdcIjog0YfQuNGB0LvQviAxLTEwLCBcInN0eWxlXCI6INC60L7RgNC+0YLQutCwINC60LDRgtC10LPQvtGA0ZbRjywgXCJkZXNjcmlwdGlvblwiOiAx4oCTMiDQvdCw0YHQuNGH0LXQvdGWLCDRg9C90ZbQutCw0LvRjNC90ZYg0YDQtdGH0LXQvdC90Y8g0YPQutGA0LDRl9C90YHRjNC60L7RjiDQtyDQutC+0L3QutGA0LXRgtC40LrQvtGOLiDQkdC10Lcg0LTQvtC00LDRgtC60L7QstC+0LPQviDRgtC10LrRgdGC0YMg0L/QvtC30LAgSlNPTi59JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG4gICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgIHVybDogYGRhdGE6JHttaW1lVHlwZX07YmFzZTY0LCR7YmFzZTY0SW1hZ2V9YCxcbiAgICAgICAgICAgICAgICBkZXRhaWw6IFwiaGlnaFwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KSxcbiAgfSk7XG5cbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgT3BlbkFJIEFQSSBlcnJvcjogJHtlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgcmVzcG9uc2Uuc3RhdHVzVGV4dH1gXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgbGV0IGNvbnRlbnQgPSBkYXRhLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudD8udHJpbSgpO1xuICBpZiAoIWNvbnRlbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXNwb25zZSBmcm9tIE9wZW5BSVwiKTtcbiAgfVxuXG4gIC8vINCv0LrRidC+INCy0ZbQtNC/0L7QstGW0LTRjCDQt9Cw0LPQvtGA0L3Rg9GC0LAg0YMgYGBganNvbiAuLi4gYGBgXG4gIGNvbnN0IGZlbmNlZCA9IGNvbnRlbnQubWF0Y2goL2BgYCg/Ompzb24pP1xccyooW1xcc1xcU10qPylcXHMqYGBgL2kpO1xuICBjb25zdCBqc29uVGV4dCA9IGZlbmNlZCA/IGZlbmNlZFsxXS50cmltKCkgOiBjb250ZW50O1xuXG4gIGxldCBhbmFseXNpcztcbiAgdHJ5IHtcbiAgICBhbmFseXNpcyA9IEpTT04ucGFyc2UoanNvblRleHQpO1xuICB9IGNhdGNoIHtcbiAgICAvLyDQlNCx0LDQudC70LjQstC40Lkg0YTQvtC70LHQtdC6OiDQstC40YLRj9Cz0YPRlNC80L4g0L7RhtGW0L3QutGDL9GB0YLQuNC70Ywg0Lcg0YLQtdC60YHRgtGDINC5INCx0LXRgNC10LzQviDQv9C10YDRiNGWIDIyMCDRgdC40LzQstC+0LvRltCyINGP0Log0L7Qv9C40YFcbiAgICByZXR1cm4ge1xuICAgICAgcmF0aW5nOiBleHRyYWN0UmF0aW5nRnJvbVRleHQoY29udGVudCksXG4gICAgICBzdHlsZTogZXh0cmFjdFN0eWxlRnJvbVRleHQoY29udGVudCksXG4gICAgICBkZXNjcmlwdGlvbjogY29udGVudC5zdWJzdHJpbmcoMCwgMjIwKS50cmltKCksXG4gICAgfTtcbiAgfVxuXG4gIC8vINCS0LDQu9GW0LTQsNGG0ZbRjyDRgdGC0YDRg9C60YLRg9GA0Lgg0YLQsCDQt9C90LDRh9C10L3RjFxuICBjb25zdCByYXRpbmcgPSBOdW1iZXIucGFyc2VJbnQoYW5hbHlzaXMucmF0aW5nLCAxMCk7XG4gIGNvbnN0IHN0eWxlID0gU3RyaW5nKGFuYWx5c2lzLnN0eWxlIHx8IFwiXCIpLnRyaW0oKTtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBTdHJpbmcoYW5hbHlzaXMuZGVzY3JpcHRpb24gfHwgXCJcIikudHJpbSgpO1xuXG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHJhdGluZykpIHtcbiAgICBhbmFseXNpcy5yYXRpbmcgPSBleHRyYWN0UmF0aW5nRnJvbVRleHQoY29udGVudCk7XG4gIH0gZWxzZSB7XG4gICAgYW5hbHlzaXMucmF0aW5nID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAsIHJhdGluZykpO1xuICB9XG5cbiAgYW5hbHlzaXMuc3R5bGUgPSBzdHlsZSB8fCBleHRyYWN0U3R5bGVGcm9tVGV4dChjb250ZW50KTtcbiAgYW5hbHlzaXMuZGVzY3JpcHRpb24gPVxuICAgIGRlc2NyaXB0aW9uIHx8IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDIyMCkudHJpbSgpIHx8IFwi0J7Qv9C40YEg0L3QtdC00L7RgdGC0YPQv9C90LjQuS5cIjtcblxuICAvLyDQn9C+0LfQvdCw0YfQtdC90L3RjyDQvdC1LdCw0YPRgtGE0ZbRgtGW0LJcbiAgaWYgKGFuYWx5c2lzLnN0eWxlID09PSBcIm5vdC1hbi1vdXRmaXRcIikge1xuICAgIGFuYWx5c2lzLnJhdGluZyA9IDA7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJhdGluZzogYW5hbHlzaXMucmF0aW5nLFxuICAgIHN0eWxlOiBhbmFseXNpcy5zdHlsZSxcbiAgICBkZXNjcmlwdGlvbjogYW5hbHlzaXMuZGVzY3JpcHRpb24sXG4gIH07XG59XG5cbi8qKiBGYWxsYmFja3MgKi9cbmZ1bmN0aW9uIGV4dHJhY3RSYXRpbmdGcm9tVGV4dCh0ZXh0KSB7XG4gIGNvbnN0IHJhdGluZ01hdGNoID0gdGV4dC5tYXRjaCgvcmF0aW5nWzpcXHNdKihcXGQrKS9pKTtcbiAgaWYgKHJhdGluZ01hdGNoKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KDEsIE1hdGgubWluKDEwLCBwYXJzZUludChyYXRpbmdNYXRjaFsxXSkpKTtcbiAgfVxuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMykgKyA3O1xufVxuXG5mdW5jdGlvbiBleHRyYWN0U3R5bGVGcm9tVGV4dCh0ZXh0KSB7XG4gIGNvbnN0IHN0eWxlcyA9IFtcbiAgICBcImNhc3VhbFwiLFxuICAgIFwiZWxlZ2FudFwiLFxuICAgIFwic3BvcnR5XCIsXG4gICAgXCJzdHJlZXR3ZWFyXCIsXG4gICAgXCJidXNpbmVzc1wiLFxuICAgIFwiYm9oZW1pYW5cIixcbiAgICBcInRyZW5keVwiLFxuICAgIFwiY2xhc3NpY1wiLFxuICAgIFwibm90LWFuLW91dGZpdFwiLFxuICBdO1xuICBjb25zdCBsb3dlclRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gIGZvciAoY29uc3Qgc3R5bGUgb2Ygc3R5bGVzKSB7XG4gICAgaWYgKGxvd2VyVGV4dC5pbmNsdWRlcyhzdHlsZSkpIHJldHVybiBzdHlsZTtcbiAgfVxuICByZXR1cm4gXCJzdHlsaXNoXCI7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgZGVtbyBhbmFseXNpcyB3aGVuIE9wZW5BSSBBUEkgaXMgbm90IGF2YWlsYWJsZVxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZURlbW9BbmFseXNpcygpIHtcbiAgY29uc3Qgc3R5bGVzID0gW1xuICAgIFwiY2FzdWFsXCIsXG4gICAgXCJlbGVnYW50XCIsXG4gICAgXCJzcG9ydHlcIixcbiAgICBcInN0cmVldHdlYXJcIixcbiAgICBcImJ1c2luZXNzXCIsXG4gICAgXCJ0cmVuZHlcIixcbiAgXTtcbiAgY29uc3QgcmFuZG9tU3R5bGUgPSBzdHlsZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc3R5bGVzLmxlbmd0aCldO1xuICBjb25zdCByYXRpbmcgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSArIDc7IC8vIDctMTBcblxuICBjb25zdCBkZXNjcmlwdGlvbnMgPSBbXG4gICAgXCLQodGC0LjQu9GM0L3QuNC5INC+0LHRgNCw0Lcg0Lcg0LPQsNGA0L3QuNC8INC/0L7RlNC00L3QsNC90L3Rj9C8INC60L7Qu9GM0L7RgNGW0LIhINCh0LjQu9GD0LXRgiDQv9GW0LTQutGA0LXRgdC70Y7RlCDRhNGW0LPRg9GA0YMsINCwINCw0LrRgdC10YHRg9Cw0YDQuCDQtNC+0LTQsNGO0YLRjCDQt9Cw0LLQtdGA0YjQtdC90L7RgdGC0ZYuINCh0YPRh9Cw0YHQvdC40Lkg0YLQsCDQsNC60YLRg9Cw0LvRjNC90LjQuSDQstC40LHRltGAISDinKhcIixcbiAgICBcItCn0YPQtNC+0LLQsCDQutC+0L7RgNC00LjQvdCw0YbRltGPINC10LvQtdC80LXQvdGC0ZbQsiEg0JrQvtC70YzQvtGA0L7QstCwINC/0LDQu9GW0YLRgNCwINCz0LDRgNC80L7QvdGW0LnQvdCwLCDRhNCw0YHQvtC9INC/0ZbQtNGF0L7QtNC40YLRjCDRltC00LXQsNC70YzQvdC+LiDQntCx0YDQsNC3INCy0LjQs9C70Y/QtNCw0ZQg0LLQv9C10LLQvdC10L3QviDRgtCwINGB0YLQuNC70YzQvdC+ISDwn5KrXCIsXG4gICAgXCLQktGW0LTQvNGW0L3QvdC40Lkg0LLQuNCx0ZbRgCDRgtC60LDQvdC40L0g0YLQsCDRgtC10LrRgdGC0YPRgCEg0J/RgNC+0L/QvtGA0YbRltGXINC30LHQsNC70LDQvdGB0L7QstCw0L3Rliwg0LTQtdGC0LDQu9GWINC00L7Qv9C+0LLQvdGO0Y7RgtGMINC+0LTQuNC9INC+0LTQvdC+0LPQvi4g0JTRg9C20LUg0LzQvtC00L3QuNC5INGC0LAg0L/RgNC40LLQsNCx0LvQuNCy0LjQuSDQu9GD0LohIPCflKVcIixcbiAgICBcItCV0LvQtdCz0LDQvdGC0L3QtSDQv9C+0ZTQtNC90LDQvdC90Y8g0LrQu9Cw0YHQuNC60Lgg0YLQsCDRgtGA0LXQvdC00ZbQsiEg0JrQvtC70ZbRgCDQv9GW0LTQutGA0LXRgdC70Y7RlCDRltC90LTQuNCy0ZbQtNGD0LDQu9GM0L3RltGB0YLRjCwg0LrRgNGW0Lkg0YHQuNC00LjRgtGMINGW0LTQtdCw0LvRjNC90L4uINCh0YLQuNC70Ywg0L3QsCDQvdCw0LnQstC40YnQvtC80YMg0YDRltCy0L3RliEg4q2QXCIsXG4gICAgXCLQr9GB0LrRgNCw0LLQuNC5INGC0LAg0LfQsNC/0LDQvCfRj9GC0L7QstGD0Y7Rh9C40LnRgdGPINC+0LHRgNCw0LchINCQ0LrRgdC10YHRg9Cw0YDQuCDQs9Cw0YDQvNC+0L3RltC50L3QviDQtNC+0L/QvtCy0L3RjtGO0YLRjCDQvtGB0L3QvtCy0L3RliDQtdC70LXQvNC10L3RgtC4LiDQodGD0YfQsNGB0L3Qviwg0YHRgtC40LvRjNC90L4g0YLQsCDQtyDRhdCw0YDQsNC60YLQtdGA0L7QvCEg8J+Mn1wiLFxuICBdO1xuXG4gIHJldHVybiB7XG4gICAgcmF0aW5nOiByYXRpbmcsXG4gICAgc3R5bGU6IHJhbmRvbVN0eWxlLFxuICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZGVzY3JpcHRpb25zLmxlbmd0aCldLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbIkluY29taW5nRm9ybSIsImZzIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJmb3JtIiwiZmllbGRzIiwiZmlsZXMiLCJwYXJzZSIsImZpbGUiLCJpbWFnZSIsIm1pbWV0eXBlIiwic3RhcnRzV2l0aCIsImltYWdlQnVmZmVyIiwicmVhZEZpbGVTeW5jIiwiZmlsZXBhdGgiLCJiYXNlNjRJbWFnZSIsInRvU3RyaW5nIiwiYW5hbHlzaXMiLCJhbmFseXplT3V0Zml0V2l0aE9wZW5BSSIsImFwaUVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZW5lcmF0ZURlbW9BbmFseXNpcyIsInVubGlua1N5bmMiLCJkZXRhaWxzIiwibWltZVR5cGUiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJFcnJvciIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJyZXNwb25zZV9mb3JtYXQiLCJ0eXBlIiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRleHQiLCJpbWFnZV91cmwiLCJ1cmwiLCJkZXRhaWwiLCJvayIsImVycm9yRGF0YSIsImNhdGNoIiwic3RhdHVzVGV4dCIsImRhdGEiLCJjaG9pY2VzIiwidHJpbSIsImZlbmNlZCIsIm1hdGNoIiwianNvblRleHQiLCJyYXRpbmciLCJleHRyYWN0UmF0aW5nRnJvbVRleHQiLCJzdHlsZSIsImV4dHJhY3RTdHlsZUZyb21UZXh0IiwiZGVzY3JpcHRpb24iLCJzdWJzdHJpbmciLCJOdW1iZXIiLCJwYXJzZUludCIsIlN0cmluZyIsImlzRmluaXRlIiwiTWF0aCIsIm1heCIsIm1pbiIsInJhdGluZ01hdGNoIiwiZmxvb3IiLCJyYW5kb20iLCJzdHlsZXMiLCJsb3dlclRleHQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwicmFuZG9tU3R5bGUiLCJsZW5ndGgiLCJkZXNjcmlwdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();